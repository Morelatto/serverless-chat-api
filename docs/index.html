<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat API | Arquitetura Cloud Native com Python e AWS</title>
    <style>
        :root {
            --primary-blue: #0066CC;
            --secondary-orange: #FF6600;
            --dark: #1A1A1A;
            --light: #F5F5F5;
            --gray: #666666;

            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --info: #3B82F6;

            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 8px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 16px rgba(0,0,0,0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            color: var(--dark);
            line-height: 1.6;
        }

        .header {
            background: white;
            box-shadow: var(--shadow-md);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo img {
            height: 40px;
        }

        .logo h1 {
            font-size: 1.5rem;
            color: var(--primary-blue);
            font-weight: 600;
        }

        .nav {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav a {
            color: var(--gray);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            font-size: 0.95rem;
        }

        .nav a:hover,
        .nav a.active {
            color: var(--secondary-orange);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 6rem 2rem 2rem;
        }

        .hero {
            background: white;
            border-radius: 12px;
            padding: 3rem;
            margin-bottom: 3rem;
            box-shadow: var(--shadow-lg);
            text-align: center;
        }

        .hero h2 {
            font-size: 2.5rem;
            color: var(--primary-blue);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero .subtitle {
            font-size: 1.25rem;
            color: var(--gray);
            margin-bottom: 2rem;
        }

        .hero .highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .highlight-card {
            padding: 1.5rem;
            background: var(--light);
            border-radius: 8px;
            border-left: 4px solid var(--secondary-orange);
        }

        .highlight-card .number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary-orange);
        }

        .highlight-card .label {
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .section {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        .section-number {
            width: 40px;
            height: 40px;
            background: var(--secondary-orange);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .section h3 {
            color: var(--primary-blue);
            font-size: 1.8rem;
            font-weight: 600;
        }

        /* Standardized Diagram Display System */
        .diagram-container {
            margin: 2rem auto;
            text-align: center;
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            max-width: 1200px;
            position: relative;
        }

        .diagram-wrapper {
            position: relative;
            display: inline-block;
            max-width: 100%;
            cursor: zoom-in;
        }

        .diagram-container img {
            width: 100%;
            height: auto;
            min-height: 300px;
            max-height: 500px;
            object-fit: contain;
            border-radius: 8px;
            background: var(--light);
            padding: 1rem;
            transition: transform 0.3s;
        }

        .diagram-container:hover img {
            transform: scale(1.02);
        }

        .diagram-controls {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            z-index: 10;
        }

        .diagram-btn {
            width: 40px;
            height: 40px;
            background: white;
            border: 2px solid var(--secondary-orange);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--secondary-orange);
            font-size: 1.2rem;
            box-shadow: var(--shadow-sm);
        }

        .diagram-btn:hover {
            background: var(--secondary-orange);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .diagram-caption {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--light);
            color: var(--gray);
            font-size: 0.9rem;
            font-style: italic;
        }

        .diagram-caption strong {
            color: var(--primary-blue);
            font-style: normal;
        }

        /* Fullscreen Modal */
        .fullscreen-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            cursor: zoom-out;
            animation: fadeIn 0.3s;
        }

        .fullscreen-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fullscreen-content {
            position: relative;
            max-width: 95vw;
            max-height: 95vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .fullscreen-modal img {
            max-width: 100%;
            max-height: 85vh;
            object-fit: contain;
            border-radius: 8px;
            background: white;
            padding: 1rem;
            animation: scaleIn 0.3s;
        }

        .fullscreen-caption {
            color: white;
            text-align: center;
            margin-top: 1rem;
            font-size: 1.1rem;
        }

        .fullscreen-close {
            position: absolute;
            top: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--dark);
            transition: all 0.3s;
            z-index: 10000;
        }

        .fullscreen-close:hover {
            background: var(--secondary-orange);
            color: white;
            transform: rotate(90deg);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes scaleIn {
            from { transform: scale(0.9); }
            to { transform: scale(1); }
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .feature-card {
            padding: 1.5rem;
            background: linear-gradient(135deg, #fff 0%, var(--light) 100%);
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .feature-card h4 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .feature-card p {
            color: var(--gray);
            line-height: 1.8;
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: var(--secondary-orange);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            color: white;
            font-size: 1.5rem;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .tech-badge {
            padding: 0.5rem 1rem;
            background: var(--primary-blue);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .metric-card {
            background: linear-gradient(135deg, var(--secondary-orange) 0%, #ff8533 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .metric-card.blue {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #004080 100%);
        }

        .metric-card.green {
            background: linear-gradient(135deg, var(--success) 0%, #0ea570 100%);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 0.95rem;
            opacity: 0.95;
        }

        .timeline {
            position: relative;
            padding-left: 3rem;
            margin-top: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 1rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--secondary-orange);
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2.5rem;
            top: 0.5rem;
            width: 12px;
            height: 12px;
            background: var(--secondary-orange);
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: var(--shadow-sm);
        }

        .timeline-item h5 {
            color: var(--primary-blue);
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .timeline-item p {
            color: var(--gray);
            line-height: 1.8;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 2rem;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--light);
        }

        .comparison-table th {
            background: var(--primary-blue);
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: var(--light);
        }

        .check {
            color: var(--success);
            font-weight: bold;
        }

        .cross {
            color: var(--danger);
            font-weight: bold;
        }

        .footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0;
            margin-top: 4rem;
            text-align: center;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .scroll-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            background: var(--secondary-orange);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s;
            opacity: 0;
            visibility: hidden;
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-to-top:hover {
            transform: translateY(-4px);
            background: #ff5500;
        }

        @media (max-width: 768px) {
            .nav {
                display: none;
            }

            .hero h2 {
                font-size: 1.8rem;
            }

            .content-grid {
                grid-template-columns: 1fr;
            }

            .section {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="asset/logo.svg" alt="Logo">
                <h1>Chat API</h1>
            </div>
            <nav class="nav">
                <a href="#visao-geral" class="active">Vis√£o Geral</a>
                <a href="#arquitetura">Arquitetura</a>
                <a href="#fluxo-dados">Fluxo de Dados</a>
                <a href="#implementacao">Implementa√ß√£o</a>
                <a href="#testes">Testes & Qualidade</a>
                <a href="#deploy">Deploy & AWS</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <section class="hero" id="visao-geral">
            <h2>Chat API - Arquitetura Cloud Native</h2>
            <p class="subtitle">API moderna para processamento de chat com LLMs, seguindo princ√≠pios Python idiom√°ticos e padr√µes cloud native</p>

            <div class="highlights">
                <div class="highlight-card">
                    <div class="number">80%+</div>
                    <div class="label">Cobertura de Testes</div>
                </div>
                <div class="highlight-card">
                    <div class="number">Python 3.11</div>
                    <div class="label">Tecnologia Moderna</div>
                </div>
                <div class="highlight-card">
                    <div class="number">12</div>
                    <div class="label">Diagramas Profissionais</div>
                </div>
                <div class="highlight-card">
                    <div class="number">Serverless</div>
                    <div class="label">AWS Lambda Ready</div>
                </div>
            </div>
        </section>

        <section class="section" id="arquitetura">
            <div class="section-header">
                <div class="section-number">1</div>
                <h3>Arquitetura da Solu√ß√£o</h3>
            </div>

            <p>A arquitetura foi projetada seguindo o princ√≠pio Pyth√¥nico "flat is better than nested",
            resultando em uma solu√ß√£o limpa, test√°vel e manuten√≠vel. A refatora√ß√£o eliminou padr√µes Java-style,
            reduzindo o c√≥digo em 70% e melhorando a clareza.</p>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-structure')">
                    <img src="asset/01_static_structure.png" alt="Estrutura Est√°tica dos Componentes" id="diagram-structure">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-structure')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 1:</strong> Estrutura est√°tica - Componentes principais e suas rela√ß√µes</p>
            </div>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h4>API Handler</h4>
                    <p>Camada fina de FastAPI que delega para a l√≥gica de neg√≥cio.
                    Valida√ß√£o via Pydantic models com tratamento robusto de erros.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h4>Core Service</h4>
                    <p>L√≥gica de neg√≥cio em fun√ß√µes ass√≠ncronas simples.
                    Gerencia cache, chamadas LLM e persist√™ncia de forma idiom√°tica.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üíæ</div>
                    <h4>Repository Pattern</h4>
                    <p>Abstra√ß√£o limpa para persist√™ncia com protocolo Python.
                    Suporta SQLite (dev) e DynamoDB (prod) transparentemente.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h4>LLM Providers</h4>
                    <p>Integra√ß√£o com Gemini (prim√°rio) e OpenRouter (fallback).
                    Retry com backoff exponencial e circuit breaker.</p>
                </div>
            </div>

            <div class="tech-stack">
                <span class="tech-badge">Python 3.11</span>
                <span class="tech-badge">FastAPI</span>
                <span class="tech-badge">Pydantic v2</span>
                <span class="tech-badge">SQLite / DynamoDB</span>
                <span class="tech-badge">Redis</span>
                <span class="tech-badge">Pytest</span>
                <span class="tech-badge">Ruff</span>
                <span class="tech-badge">uv</span>
            </div>
        </section>

        <section class="section" id="fluxo-dados">
            <div class="section-header">
                <div class="section-number">2</div>
                <h3>Fluxo de Dados e Processamento</h3>
            </div>

            <p>O processamento segue um fluxo linear claro com tratamento de erros em cada etapa.
            O sistema prioriza cache para performance e implementa graceful degradation em falhas.</p>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-flow')">
                    <img src="asset/02_request_flow.png" alt="Fluxo de Requisi√ß√µes" id="diagram-flow">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-flow')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 2:</strong> Fluxo de requisi√ß√£o - Do cliente ao LLM e retorno</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-data')">
                    <img src="asset/04_data_transformations.png" alt="Transforma√ß√µes de Dados" id="diagram-data">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-data')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 3:</strong> Transforma√ß√µes de dados - JSON ‚Üí Python ‚Üí LLM ‚Üí Resposta</p>
            </div>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Estrat√©gia de Cache Multi-Camada</h4>

            <div class="timeline">
                <div class="timeline-item">
                    <h5>Gera√ß√£o de Cache Key</h5>
                    <p>Hash SHA-256 truncado do user_id + content para identifica√ß√£o √∫nica.
                    Garante consist√™ncia de cache mesmo com conte√∫do id√™ntico.</p>
                </div>

                <div class="timeline-item">
                    <h5>Cache Lookup</h5>
                    <p>Busca prim√°ria no Redis (produ√ß√£o) ou dict em mem√≥ria (desenvolvimento).
                    Retorno imediato se hit, evitando chamada custosa ao LLM.</p>
                </div>

                <div class="timeline-item">
                    <h5>LLM Processing</h5>
                    <p>Em cache miss, chama provider LLM com retry autom√°tico.
                    Parseamento da resposta e extra√ß√£o de metadados de uso.</p>
                </div>

                <div class="timeline-item">
                    <h5>Cache Store</h5>
                    <p>Armazena resposta processada no cache para futuras consultas.
                    TTL configur√°vel baseado no tipo de conte√∫do.</p>
                </div>
            </div>
        </section>

        <section class="section" id="implementacao">
            <div class="section-header">
                <div class="section-number">3</div>
                <h3>Detalhes de Implementa√ß√£o</h3>
            </div>

            <p>A implementa√ß√£o foca em simplicidade e testabilidade, seguindo padr√µes Python idiom√°ticos
            com separa√ß√£o clara de responsabilidades.</p>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-dependencies')">
                    <img src="asset/06_runtime_dependencies.png" alt="Depend√™ncias Runtime" id="diagram-dependencies">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-dependencies')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 4:</strong> Depend√™ncias runtime - Inje√ß√£o e configura√ß√£o</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-protocols')">
                    <img src="asset/08_protocol_pattern.png" alt="Padr√£o de Protocolos" id="diagram-protocols">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-protocols')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 5:</strong> Padr√£o Protocol - Flexibilidade e testabilidade</p>
            </div>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">üèóÔ∏è</div>
                    <h4>Fun√ß√µes no N√≠vel do M√≥dulo</h4>
                    <p>Core business logic implementado como fun√ß√µes ass√≠ncronas simples,
                    n√£o classes. Facilita testes e reduz boilerplate.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">‚öôÔ∏è</div>
                    <h4>Settings Singleton</h4>
                    <p>Configura√ß√£o carregada uma vez no n√≠vel do m√≥dulo.
                    Todas as vari√°veis usam prefixo CHAT_ para organiza√ß√£o.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üîå</div>
                    <h4>Dependency Injection</h4>
                    <p>Repository e Cache injetados via app.state no FastAPI.
                    Permite diferentes implementa√ß√µes por ambiente.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <h4>Type Safety</h4>
                    <p>Protocolo Python para contratos claros.
                    MyPy validation garante type safety sem overhead runtime.</p>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-errors')">
                    <img src="asset/05_error_handling.png" alt="Tratamento de Erros" id="diagram-errors">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-errors')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 6:</strong> Tratamento de erros - Falhas e recovery</p>
            </div>
        </section>

        <section class="section" id="testes">
            <div class="section-header">
                <div class="section-number">4</div>
                <h3>Testes e Qualidade de C√≥digo</h3>
            </div>

            <p>Suite de testes abrangente com 80%+ de cobertura, focando em comportamento
            ao inv√©s de implementa√ß√£o. Pipelines automatizadas garantem qualidade.</p>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Estrutura de Testes</h4>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">üß™</div>
                    <h4>Testes Unit√°rios</h4>
                    <p><strong>test_core.py:</strong> L√≥gica de neg√≥cio<br>
                    <strong>test_models.py:</strong> Valida√ß√£o Pydantic<br>
                    <strong>test_storage.py:</strong> Persist√™ncia e cache</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üåê</div>
                    <h4>Testes de Integra√ß√£o</h4>
                    <p><strong>test_handlers.py:</strong> Endpoints HTTP<br>
                    <strong>test_e2e.py:</strong> Fluxos completos<br>
                    Mocking de depend√™ncias externas</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h4>Cobertura e M√©tricas</h4>
                    <p><strong>Coverage:</strong> 80.12% atual<br>
                    <strong>Target:</strong> >75% obrigat√≥rio<br>
                    <strong>Relat√≥rios:</strong> HTML + terminal</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h4>Qualidade de C√≥digo</h4>
                    <p><strong>Ruff:</strong> Linting + formatting<br>
                    <strong>MyPy:</strong> Type checking<br>
                    <strong>Bandit:</strong> Security scanning</p>
                </div>
            </div>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Comandos de Desenvolvimento</h4>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descri√ß√£o</th>
                        <th>Uso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>uv run python -m pytest tests/ -v</code></td>
                        <td>Executa todos os testes</td>
                        <td>CI/CD Pipeline</td>
                    </tr>
                    <tr>
                        <td><code>ruff check . --fix</code></td>
                        <td>Lint e corre√ß√£o autom√°tica</td>
                        <td>Pre-commit hooks</td>
                    </tr>
                    <tr>
                        <td><code>mypy chat_api/</code></td>
                        <td>Verifica√ß√£o de tipos</td>
                        <td>Valida√ß√£o est√°tica</td>
                    </tr>
                    <tr>
                        <td><code>uv run python -m chat_api</code></td>
                        <td>Executa API localmente</td>
                        <td>Desenvolvimento</td>
                    </tr>
                </tbody>
            </table>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">80.12%</div>
                    <div class="metric-label">Cobertura de Testes</div>
                </div>
                <div class="metric-card blue">
                    <div class="metric-value">100%</div>
                    <div class="metric-label">Type Safety (MyPy)</div>
                </div>
                <div class="metric-card green">
                    <div class="metric-value">Zero</div>
                    <div class="metric-label">Issues de Seguran√ßa</div>
                </div>
            </div>
        </section>

        <section class="section" id="deploy">
            <div class="section-header">
                <div class="section-number">5</div>
                <h3>Deployment e AWS</h3>
            </div>

            <p>Sistema preparado para m√∫ltiplos ambientes com deploy automatizado.
            Suporte completo para desenvolvimento local, Docker e AWS Lambda serverless.</p>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-deployments')">
                    <img src="asset/03_deployment_environments.png" alt="Ambientes de Deploy" id="diagram-deployments">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-deployments')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 7:</strong> Ambientes de deployment - Local, Docker e AWS</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-aws')">
                    <img src="asset/07_aws_infrastructure.png" alt="Infraestrutura AWS" id="diagram-aws">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-aws')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 8:</strong> AWS Infrastructure - Serverless completo</p>
            </div>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Estrat√©gias de Deployment</h4>

            <div class="timeline">
                <div class="timeline-item">
                    <h5>Local Development</h5>
                    <p><strong>Python + SQLite:</strong> Setup r√°pido com uv sync --dev<br>
                    <strong>Docker:</strong> Ambiente isolado com docker-compose<br>
                    <strong>Hot Reload:</strong> FastAPI com --reload para desenvolvimento</p>
                </div>

                <div class="timeline-item">
                    <h5>AWS Lambda Production</h5>
                    <p><strong>Serverless:</strong> Zero manuten√ß√£o de servidor<br>
                    <strong>Auto-scaling:</strong> 0 a 1000 execu√ß√µes concorrentes<br>
                    <strong>Cost-effective:</strong> Pague apenas pelo que usar</p>
                </div>

                <div class="timeline-item">
                    <h5>Infrastructure as Code</h5>
                    <p><strong>Terraform:</strong> Infraestrutura versionada<br>
                    <strong>Make targets:</strong> Deploy automatizado<br>
                    <strong>Environment configs:</strong> dev/staging/prod</p>
                </div>

                <div class="timeline-item">
                    <h5>CI/CD Pipeline</h5>
                    <p><strong>Pre-commit hooks:</strong> Qualidade garantida<br>
                    <strong>GitHub Actions ready:</strong> Deploy automatizado<br>
                    <strong>Health checks:</strong> Valida√ß√£o p√≥s-deploy</p>
                </div>
            </div>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">üê≥</div>
                    <h4>Docker Multi-stage</h4>
                    <p>Build otimizado com imagem distroless.
                    Redu√ß√£o de 80% no tamanho final da imagem.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h4>Lambda Cold Start</h4>
                    <p>Otimiza√ß√µes para cold start &lt;500ms.
                    Mangum adapter para compatibilidade ASGI.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üèóÔ∏è</div>
                    <h4>Terraform IaC</h4>
                    <p>Infraestrutura completa como c√≥digo.
                    API Gateway + Lambda + DynamoDB automatizado.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h4>Observabilidade</h4>
                    <p>CloudWatch Logs + X-Ray tracing.
                    M√©tricas customizadas para monitoramento.</p>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="section-header">
                <div class="section-number">6</div>
                <h3>Arquitetura T√©cnica Detalhada</h3>
            </div>

            <p>Vis√£o completa dos diagramas de sequ√™ncia mostrando intera√ß√µes temporais
            entre componentes em diferentes cen√°rios de uso.</p>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h4>Happy Path</h4>
                    <p>Fluxo normal de requisi√ß√£o com cache miss,
                    chamada LLM e persist√™ncia bem-sucedida.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h4>Cache Hit</h4>
                    <p>Resposta r√°pida com dados em cache,
                    evitando chamada custosa ao LLM.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üîÑ</div>
                    <h4>Error Recovery</h4>
                    <p>Tratamento de falhas com fallback
                    entre providers LLM diferentes.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üöÄ</div>
                    <h4>Application Startup</h4>
                    <p>Inicializa√ß√£o da aplica√ß√£o com
                    factory pattern e dependency injection.</p>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-sequence-1')">
                    <img src="asset/09_happy_path_sequence.png" alt="Sequ√™ncia Happy Path" id="diagram-sequence-1">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-sequence-1')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 9:</strong> Happy Path - Fluxo de sucesso completo</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-sequence-2')">
                    <img src="asset/10_cache_hit_sequence.png" alt="Sequ√™ncia Cache Hit" id="diagram-sequence-2">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-sequence-2')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 10:</strong> Cache Hit - Resposta otimizada do cache</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-sequence-3')">
                    <img src="asset/11_error_sequence.png" alt="Sequ√™ncia Error Recovery" id="diagram-sequence-3">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-sequence-3')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 11:</strong> Error Recovery - Fallback entre providers</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-sequence-4')">
                    <img src="asset/12_startup_sequence.png" alt="Sequ√™ncia Startup" id="diagram-sequence-4">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-sequence-4')" title="Tela cheia">‚õ∂</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 12:</strong> Application Startup - Inicializa√ß√£o e configura√ß√£o</p>
            </div>
        </section>

        <section class="section">
            <div class="section-header">
                <div class="section-number">7</div>
                <h3>Pr√≥ximos Passos e Evolu√ß√£o</h3>
            </div>

            <p>O projeto representa uma base s√≥lida para expans√£o, com arquitetura limpa
            que facilita adi√ß√£o de novas funcionalidades e otimiza√ß√µes.</p>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Funcionalidades Implementadas</h4>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">‚úÖ</div>
                    <h4>Core API</h4>
                    <p>Endpoints REST completos com valida√ß√£o,
                    rate limiting e documenta√ß√£o OpenAPI autom√°tica.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">‚úÖ</div>
                    <h4>Multi-Provider LLM</h4>
                    <p>Suporte a Gemini e OpenRouter com
                    fallback autom√°tico e retry inteligente.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">‚úÖ</div>
                    <h4>Storage Flex√≠vel</h4>
                    <p>SQLite para desenvolvimento, DynamoDB para produ√ß√£o,
                    interface √∫nica via Repository Pattern.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">‚úÖ</div>
                    <h4>Deploy Automation</h4>
                    <p>Makefile com targets para desenvolvimento,
                    Docker e AWS Lambda deployment.</p>
                </div>
            </div>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Roadmap de Melhorias</h4>

            <div class="timeline">
                <div class="timeline-item">
                    <h5>Streaming Responses</h5>
                    <p>Implementar Server-Sent Events para streaming de respostas LLM.
                    Melhor UX para intera√ß√µes longas com WebSocket support.</p>
                </div>

                <div class="timeline-item">
                    <h5>Authentication & Authorization</h5>
                    <p>Sistema de API keys com rate limiting por usu√°rio.
                    Integra√ß√£o com OAuth2/JWT para autentica√ß√£o robusta.</p>
                </div>

                <div class="timeline-item">
                    <h5>Advanced Analytics</h5>
                    <p>Dashboard de m√©tricas com usage patterns,
                    cost analysis e performance insights.</p>
                </div>

                <div class="timeline-item">
                    <h5>Multi-Modal Support</h5>
                    <p>Suporte a imagens e arquivos al√©m de texto.
                    Integra√ß√£o com vision models para casos de uso avan√ßados.</p>
                </div>
            </div>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">70%</div>
                    <div class="metric-label">Redu√ß√£o de C√≥digo</div>
                </div>
                <div class="metric-card blue">
                    <div class="metric-value">12</div>
                    <div class="metric-label">Diagramas Profissionais</div>
                </div>
                <div class="metric-card green">
                    <div class="metric-value">Modern</div>
                    <div class="metric-label">Python Architecture</div>
                </div>
            </div>
        </section>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p>¬© 2025 Chat API | Arquitetura Cloud Native</p>
            <p style="margin-top: 1rem; opacity: 0.8;">Documenta√ß√£o t√©cnica do projeto - Python idiom√°tico e padr√µes modernos</p>
        </div>
    </footer>

    <div class="scroll-to-top" id="scrollTop">‚Üë</div>

    <!-- Fullscreen Modal -->
    <div class="fullscreen-modal" id="fullscreenModal">
        <span class="fullscreen-close" onclick="closeFullscreen()">‚úï</span>
        <div class="fullscreen-content">
            <img id="fullscreenImage" src="" alt="">
            <div class="fullscreen-caption" id="fullscreenCaption"></div>
        </div>
    </div>

    <script>
        // Smooth scroll for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Active nav link on scroll
        const sections = document.querySelectorAll('.section, .hero');
        const navLinks = document.querySelectorAll('.nav a');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollY >= (sectionTop - 100)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').slice(1) === current) {
                    link.classList.add('active');
                }
            });
        });

        // Scroll to top button
        const scrollTopBtn = document.getElementById('scrollTop');

        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                scrollTopBtn.classList.add('visible');
            } else {
                scrollTopBtn.classList.remove('visible');
            }
        });

        scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Header shadow on scroll
        const header = document.querySelector('.header');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 10) {
                header.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            } else {
                header.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
            }
        });

        // Fullscreen functionality
        function openFullscreen(elementId) {
            const modal = document.getElementById('fullscreenModal');
            const fullscreenImg = document.getElementById('fullscreenImage');
            const fullscreenCap = document.getElementById('fullscreenCaption');

            if (!modal || !fullscreenImg || !fullscreenCap) return;

            try {
                const img = document.getElementById(elementId);
                if (img) {
                    fullscreenImg.src = img.src;
                    fullscreenImg.alt = img.alt;
                    const container = img.closest('.diagram-container');
                    const caption = container ? container.querySelector('.diagram-caption') : null;
                    fullscreenCap.innerHTML = caption ? caption.innerHTML : '';
                }

                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            } catch (error) {
                console.error('Error opening fullscreen:', error);
            }
        }

        function closeFullscreen() {
            const modal = document.getElementById('fullscreenModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // Close fullscreen on modal click
        const fullscreenModal = document.getElementById('fullscreenModal');
        if (fullscreenModal) {
            fullscreenModal.addEventListener('click', (e) => {
                if (e.target === e.currentTarget || e.target.classList.contains('fullscreen-content')) {
                    closeFullscreen();
                }
            });
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeFullscreen();
            }
        });
    </script>
</body>
</html>
