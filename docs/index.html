<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat API | Arquitetura Cloud Native com Python e AWS</title>
    <style>
        :root {
            --primary-blue: #0066CC;
            --secondary-orange: #FF6600;
            --dark: #1A1A1A;
            --light: #F5F5F5;
            --gray: #666666;

            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --info: #3B82F6;

            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 8px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 16px rgba(0,0,0,0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            color: var(--dark);
            line-height: 1.6;
        }

        .header {
            background: white;
            box-shadow: var(--shadow-md);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo img {
            height: 40px;
        }

        .logo h1 {
            font-size: 1.5rem;
            color: var(--primary-blue);
            font-weight: 600;
        }

        .nav {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav a {
            color: var(--gray);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            font-size: 0.95rem;
        }

        .nav a:hover,
        .nav a.active {
            color: var(--secondary-orange);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 6rem 2rem 2rem;
        }

        .hero {
            background: white;
            border-radius: 12px;
            padding: 3rem;
            margin-bottom: 3rem;
            box-shadow: var(--shadow-lg);
            text-align: center;
        }

        .hero h2 {
            font-size: 2.5rem;
            color: var(--primary-blue);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero .subtitle {
            font-size: 1.25rem;
            color: var(--gray);
            margin-bottom: 2rem;
        }

        .hero .highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .highlight-card {
            padding: 1.5rem;
            background: var(--light);
            border-radius: 8px;
            border-left: 4px solid var(--secondary-orange);
        }

        .highlight-card .number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary-orange);
        }

        .highlight-card .label {
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .section {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        .section-number {
            width: 40px;
            height: 40px;
            background: var(--secondary-orange);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .section h3 {
            color: var(--primary-blue);
            font-size: 1.8rem;
            font-weight: 600;
        }

        /* Standardized Diagram Display System */
        .diagram-container {
            margin: 2rem auto;
            text-align: center;
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            max-width: 1200px;
            position: relative;
        }

        .diagram-wrapper {
            position: relative;
            display: inline-block;
            max-width: 100%;
            cursor: zoom-in;
        }

        .diagram-container img {
            width: 100%;
            height: auto;
            min-height: 300px;
            max-height: 500px;
            object-fit: contain;
            border-radius: 8px;
            background: var(--light);
            padding: 1rem;
            transition: transform 0.3s;
        }

        .diagram-container:hover img {
            transform: scale(1.02);
        }

        .diagram-controls {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            z-index: 10;
        }

        .diagram-btn {
            width: 40px;
            height: 40px;
            background: white;
            border: 2px solid var(--secondary-orange);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--secondary-orange);
            font-size: 1.2rem;
            box-shadow: var(--shadow-sm);
        }

        .diagram-btn:hover {
            background: var(--secondary-orange);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .diagram-caption {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--light);
            color: var(--gray);
            font-size: 0.9rem;
            font-style: italic;
        }

        .diagram-caption strong {
            color: var(--primary-blue);
            font-style: normal;
        }

        /* Fullscreen Modal */
        .fullscreen-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            cursor: zoom-out;
            animation: fadeIn 0.3s;
        }

        .fullscreen-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fullscreen-content {
            position: relative;
            max-width: 95vw;
            max-height: 95vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .fullscreen-modal img {
            max-width: 100%;
            max-height: 85vh;
            object-fit: contain;
            border-radius: 8px;
            background: white;
            padding: 1rem;
            animation: scaleIn 0.3s;
        }

        .fullscreen-caption {
            color: white;
            text-align: center;
            margin-top: 1rem;
            font-size: 1.1rem;
        }

        .fullscreen-close {
            position: absolute;
            top: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--dark);
            transition: all 0.3s;
            z-index: 10000;
        }

        .fullscreen-close:hover {
            background: var(--secondary-orange);
            color: white;
            transform: rotate(90deg);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes scaleIn {
            from { transform: scale(0.9); }
            to { transform: scale(1); }
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .feature-card {
            padding: 1.5rem;
            background: linear-gradient(135deg, #fff 0%, var(--light) 100%);
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .feature-card h4 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .feature-card p {
            color: var(--gray);
            line-height: 1.8;
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: var(--secondary-orange);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            color: white;
            font-size: 1.5rem;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .tech-badge {
            padding: 0.5rem 1rem;
            background: var(--primary-blue);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .metric-card {
            background: linear-gradient(135deg, var(--secondary-orange) 0%, #ff8533 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .metric-card.blue {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #004080 100%);
        }

        .metric-card.green {
            background: linear-gradient(135deg, var(--success) 0%, #0ea570 100%);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 0.95rem;
            opacity: 0.95;
        }

        .timeline {
            position: relative;
            padding-left: 3rem;
            margin-top: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 1rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--secondary-orange);
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2.5rem;
            top: 0.5rem;
            width: 12px;
            height: 12px;
            background: var(--secondary-orange);
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: var(--shadow-sm);
        }

        .timeline-item h5 {
            color: var(--primary-blue);
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .timeline-item p {
            color: var(--gray);
            line-height: 1.8;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 2rem;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--light);
        }

        .comparison-table th {
            background: var(--primary-blue);
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: var(--light);
        }

        .check {
            color: var(--success);
            font-weight: bold;
        }

        .cross {
            color: var(--danger);
            font-weight: bold;
        }

        .footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0;
            margin-top: 4rem;
            text-align: center;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .scroll-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            background: var(--secondary-orange);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s;
            opacity: 0;
            visibility: hidden;
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-to-top:hover {
            transform: translateY(-4px);
            background: #ff5500;
        }

        @media (max-width: 768px) {
            .nav {
                display: none;
            }

            .hero h2 {
                font-size: 1.8rem;
            }

            .content-grid {
                grid-template-columns: 1fr;
            }

            .section {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="asset/logo.svg" alt="Logo">
                <h1>Chat API</h1>
            </div>
            <nav class="nav">
                <a href="#visao-geral" class="active">Visão Geral</a>
                <a href="#arquitetura">Arquitetura</a>
                <a href="#fluxo-dados">Fluxo de Dados</a>
                <a href="#implementacao">Implementação</a>
                <a href="#testes">Testes & Qualidade</a>
                <a href="#deploy">Deploy & AWS</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <section class="hero" id="visao-geral">
            <h2>Chat API - Arquitetura Cloud Native</h2>
            <p class="subtitle">API moderna para processamento de chat com LLMs, seguindo princípios Python idiomáticos e padrões cloud native</p>

            <div class="highlights">
                <div class="highlight-card">
                    <div class="number">80%+</div>
                    <div class="label">Cobertura de Testes</div>
                </div>
                <div class="highlight-card">
                    <div class="number">Python 3.11</div>
                    <div class="label">Tecnologia Moderna</div>
                </div>
                <div class="highlight-card">
                    <div class="number">12</div>
                    <div class="label">Diagramas Profissionais</div>
                </div>
                <div class="highlight-card">
                    <div class="number">Serverless</div>
                    <div class="label">AWS Lambda Ready</div>
                </div>
            </div>
        </section>

        <section class="section" id="arquitetura">
            <div class="section-header">
                <div class="section-number">1</div>
                <h3>Arquitetura da Solução</h3>
            </div>

            <p>A arquitetura foi projetada seguindo o princípio Pythônico "flat is better than nested",
            resultando em uma solução limpa, testável e manutenível. A refatoração eliminou padrões Java-style,
            reduzindo o código em 70% e melhorando a clareza.</p>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-structure')">
                    <img src="asset/01_static_structure.png" alt="Estrutura Estática dos Componentes" id="diagram-structure">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-structure')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 1:</strong> Estrutura estática - Componentes principais e suas relações</p>
            </div>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">🎯</div>
                    <h4>API Handler</h4>
                    <p>Camada fina de FastAPI que delega para a lógica de negócio.
                    Validação via Pydantic models com tratamento robusto de erros.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">⚡</div>
                    <h4>Core Service</h4>
                    <p>Lógica de negócio em funções assíncronas simples.
                    Gerencia cache, chamadas LLM e persistência de forma idiomática.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">💾</div>
                    <h4>Repository Pattern</h4>
                    <p>Abstração limpa para persistência com protocolo Python.
                    Suporta SQLite (dev) e DynamoDB (prod) transparentemente.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🤖</div>
                    <h4>LLM Providers</h4>
                    <p>Integração com Gemini (primário) e OpenRouter (fallback).
                    Retry com backoff exponencial e circuit breaker.</p>
                </div>
            </div>

            <div class="tech-stack">
                <span class="tech-badge">Python 3.11</span>
                <span class="tech-badge">FastAPI</span>
                <span class="tech-badge">Pydantic v2</span>
                <span class="tech-badge">SQLite / DynamoDB</span>
                <span class="tech-badge">Redis</span>
                <span class="tech-badge">Pytest</span>
                <span class="tech-badge">Ruff</span>
                <span class="tech-badge">uv</span>
            </div>
        </section>

        <section class="section" id="fluxo-dados">
            <div class="section-header">
                <div class="section-number">2</div>
                <h3>Fluxo de Dados e Processamento</h3>
            </div>

            <p>O processamento segue um fluxo linear claro com tratamento de erros em cada etapa.
            O sistema prioriza cache para performance e implementa graceful degradation em falhas.</p>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-flow')">
                    <img src="asset/02_request_flow.png" alt="Fluxo de Requisições" id="diagram-flow">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-flow')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 2:</strong> Fluxo de requisição - Do cliente ao LLM e retorno</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-data')">
                    <img src="asset/04_data_transformations.png" alt="Transformações de Dados" id="diagram-data">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-data')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 3:</strong> Transformações de dados - JSON → Python → LLM → Resposta</p>
            </div>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Estratégia de Cache Multi-Camada</h4>

            <div class="timeline">
                <div class="timeline-item">
                    <h5>Geração de Cache Key</h5>
                    <p>Hash SHA-256 truncado do user_id + content para identificação única.
                    Garante consistência de cache mesmo com conteúdo idêntico.</p>
                </div>

                <div class="timeline-item">
                    <h5>Cache Lookup</h5>
                    <p>Busca primária no Redis (produção) ou dict em memória (desenvolvimento).
                    Retorno imediato se hit, evitando chamada custosa ao LLM.</p>
                </div>

                <div class="timeline-item">
                    <h5>LLM Processing</h5>
                    <p>Em cache miss, chama provider LLM com retry automático.
                    Parseamento da resposta e extração de metadados de uso.</p>
                </div>

                <div class="timeline-item">
                    <h5>Cache Store</h5>
                    <p>Armazena resposta processada no cache para futuras consultas.
                    TTL configurável baseado no tipo de conteúdo.</p>
                </div>
            </div>
        </section>

        <section class="section" id="implementacao">
            <div class="section-header">
                <div class="section-number">3</div>
                <h3>Detalhes de Implementação</h3>
            </div>

            <p>A implementação foca em simplicidade e testabilidade, seguindo padrões Python idiomáticos
            com separação clara de responsabilidades.</p>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-dependencies')">
                    <img src="asset/06_runtime_dependencies.png" alt="Dependências Runtime" id="diagram-dependencies">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-dependencies')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 4:</strong> Dependências runtime - Injeção e configuração</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-protocols')">
                    <img src="asset/08_protocol_pattern.png" alt="Padrão de Protocolos" id="diagram-protocols">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-protocols')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 5:</strong> Padrão Protocol - Flexibilidade e testabilidade</p>
            </div>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">🏗️</div>
                    <h4>Funções no Nível do Módulo</h4>
                    <p>Core business logic implementado como funções assíncronas simples,
                    não classes. Facilita testes e reduz boilerplate.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">⚙️</div>
                    <h4>Settings Singleton</h4>
                    <p>Configuração carregada uma vez no nível do módulo.
                    Todas as variáveis usam prefixo CHAT_ para organização.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🔌</div>
                    <h4>Dependency Injection</h4>
                    <p>Repository e Cache injetados via app.state no FastAPI.
                    Permite diferentes implementações por ambiente.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🛡️</div>
                    <h4>Type Safety</h4>
                    <p>Protocolo Python para contratos claros.
                    MyPy validation garante type safety sem overhead runtime.</p>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-errors')">
                    <img src="asset/05_error_handling.png" alt="Tratamento de Erros" id="diagram-errors">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-errors')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 6:</strong> Tratamento de erros - Falhas e recovery</p>
            </div>
        </section>

        <section class="section" id="testes">
            <div class="section-header">
                <div class="section-number">4</div>
                <h3>Testes e Qualidade de Código</h3>
            </div>

            <p>Suite de testes abrangente com 80%+ de cobertura, focando em comportamento
            ao invés de implementação. Pipelines automatizadas garantem qualidade.</p>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Estrutura de Testes</h4>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">🧪</div>
                    <h4>Testes Unitários</h4>
                    <p><strong>test_core.py:</strong> Lógica de negócio<br>
                    <strong>test_models.py:</strong> Validação Pydantic<br>
                    <strong>test_storage.py:</strong> Persistência e cache</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🌐</div>
                    <h4>Testes de Integração</h4>
                    <p><strong>test_handlers.py:</strong> Endpoints HTTP<br>
                    <strong>test_e2e.py:</strong> Fluxos completos<br>
                    Mocking de dependências externas</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">📊</div>
                    <h4>Cobertura e Métricas</h4>
                    <p><strong>Coverage:</strong> 80.12% atual<br>
                    <strong>Target:</strong> >75% obrigatório<br>
                    <strong>Relatórios:</strong> HTML + terminal</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🔍</div>
                    <h4>Qualidade de Código</h4>
                    <p><strong>Ruff:</strong> Linting + formatting<br>
                    <strong>MyPy:</strong> Type checking<br>
                    <strong>Bandit:</strong> Security scanning</p>
                </div>
            </div>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Comandos de Desenvolvimento</h4>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descrição</th>
                        <th>Uso</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>uv run python -m pytest tests/ -v</code></td>
                        <td>Executa todos os testes</td>
                        <td>CI/CD Pipeline</td>
                    </tr>
                    <tr>
                        <td><code>ruff check . --fix</code></td>
                        <td>Lint e correção automática</td>
                        <td>Pre-commit hooks</td>
                    </tr>
                    <tr>
                        <td><code>mypy chat_api/</code></td>
                        <td>Verificação de tipos</td>
                        <td>Validação estática</td>
                    </tr>
                    <tr>
                        <td><code>uv run python -m chat_api</code></td>
                        <td>Executa API localmente</td>
                        <td>Desenvolvimento</td>
                    </tr>
                </tbody>
            </table>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">80.12%</div>
                    <div class="metric-label">Cobertura de Testes</div>
                </div>
                <div class="metric-card blue">
                    <div class="metric-value">100%</div>
                    <div class="metric-label">Type Safety (MyPy)</div>
                </div>
                <div class="metric-card green">
                    <div class="metric-value">Zero</div>
                    <div class="metric-label">Issues de Segurança</div>
                </div>
            </div>
        </section>

        <section class="section" id="deploy">
            <div class="section-header">
                <div class="section-number">5</div>
                <h3>Deployment e AWS</h3>
            </div>

            <p>Sistema preparado para múltiplos ambientes com deploy automatizado.
            Suporte completo para desenvolvimento local, Docker e AWS Lambda serverless.</p>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-deployments')">
                    <img src="asset/03_deployment_environments.png" alt="Ambientes de Deploy" id="diagram-deployments">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-deployments')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 7:</strong> Ambientes de deployment - Local, Docker e AWS</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-aws')">
                    <img src="asset/07_aws_infrastructure.png" alt="Infraestrutura AWS" id="diagram-aws">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-aws')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 8:</strong> AWS Infrastructure - Serverless completo</p>
            </div>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Estratégias de Deployment</h4>

            <div class="timeline">
                <div class="timeline-item">
                    <h5>Local Development</h5>
                    <p><strong>Python + SQLite:</strong> Setup rápido com uv sync --dev<br>
                    <strong>Docker:</strong> Ambiente isolado com docker-compose<br>
                    <strong>Hot Reload:</strong> FastAPI com --reload para desenvolvimento</p>
                </div>

                <div class="timeline-item">
                    <h5>AWS Lambda Production</h5>
                    <p><strong>Serverless:</strong> Zero manutenção de servidor<br>
                    <strong>Auto-scaling:</strong> 0 a 1000 execuções concorrentes<br>
                    <strong>Cost-effective:</strong> Pague apenas pelo que usar</p>
                </div>

                <div class="timeline-item">
                    <h5>Infrastructure as Code</h5>
                    <p><strong>Terraform:</strong> Infraestrutura versionada<br>
                    <strong>Make targets:</strong> Deploy automatizado<br>
                    <strong>Environment configs:</strong> dev/staging/prod</p>
                </div>

                <div class="timeline-item">
                    <h5>CI/CD Pipeline</h5>
                    <p><strong>Pre-commit hooks:</strong> Qualidade garantida<br>
                    <strong>GitHub Actions ready:</strong> Deploy automatizado<br>
                    <strong>Health checks:</strong> Validação pós-deploy</p>
                </div>
            </div>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">🐳</div>
                    <h4>Docker Multi-stage</h4>
                    <p>Build otimizado com imagem distroless.
                    Redução de 80% no tamanho final da imagem.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">⚡</div>
                    <h4>Lambda Cold Start</h4>
                    <p>Otimizações para cold start &lt;500ms.
                    Mangum adapter para compatibilidade ASGI.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🏗️</div>
                    <h4>Terraform IaC</h4>
                    <p>Infraestrutura completa como código.
                    API Gateway + Lambda + DynamoDB automatizado.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">📊</div>
                    <h4>Observabilidade</h4>
                    <p>CloudWatch Logs + X-Ray tracing.
                    Métricas customizadas para monitoramento.</p>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="section-header">
                <div class="section-number">6</div>
                <h3>Arquitetura Técnica Detalhada</h3>
            </div>

            <p>Visão completa dos diagramas de sequência mostrando interações temporais
            entre componentes em diferentes cenários de uso.</p>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">🎯</div>
                    <h4>Happy Path</h4>
                    <p>Fluxo normal de requisição com cache miss,
                    chamada LLM e persistência bem-sucedida.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">⚡</div>
                    <h4>Cache Hit</h4>
                    <p>Resposta rápida com dados em cache,
                    evitando chamada custosa ao LLM.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🔄</div>
                    <h4>Error Recovery</h4>
                    <p>Tratamento de falhas com fallback
                    entre providers LLM diferentes.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🚀</div>
                    <h4>Application Startup</h4>
                    <p>Inicialização da aplicação com
                    factory pattern e dependency injection.</p>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-sequence-1')">
                    <img src="asset/09_happy_path_sequence.png" alt="Sequência Happy Path" id="diagram-sequence-1">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-sequence-1')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 9:</strong> Happy Path - Fluxo de sucesso completo</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-sequence-2')">
                    <img src="asset/10_cache_hit_sequence.png" alt="Sequência Cache Hit" id="diagram-sequence-2">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-sequence-2')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 10:</strong> Cache Hit - Resposta otimizada do cache</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-sequence-3')">
                    <img src="asset/11_error_sequence.png" alt="Sequência Error Recovery" id="diagram-sequence-3">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-sequence-3')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 11:</strong> Error Recovery - Fallback entre providers</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-wrapper" onclick="openFullscreen('diagram-sequence-4')">
                    <img src="asset/12_startup_sequence.png" alt="Sequência Startup" id="diagram-sequence-4">
                    <div class="diagram-controls">
                        <button class="diagram-btn" onclick="event.stopPropagation(); openFullscreen('diagram-sequence-4')" title="Tela cheia">⛶</button>
                    </div>
                </div>
                <p class="diagram-caption"><strong>Figura 12:</strong> Application Startup - Inicialização e configuração</p>
            </div>
        </section>

        <section class="section">
            <div class="section-header">
                <div class="section-number">7</div>
                <h3>Próximos Passos e Evolução</h3>
            </div>

            <p>O projeto representa uma base sólida para expansão, com arquitetura limpa
            que facilita adição de novas funcionalidades e otimizações.</p>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Funcionalidades Implementadas</h4>

            <div class="content-grid">
                <div class="feature-card">
                    <div class="feature-icon">✅</div>
                    <h4>Core API</h4>
                    <p>Endpoints REST completos com validação,
                    rate limiting e documentação OpenAPI automática.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">✅</div>
                    <h4>Multi-Provider LLM</h4>
                    <p>Suporte a Gemini e OpenRouter com
                    fallback automático e retry inteligente.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">✅</div>
                    <h4>Storage Flexível</h4>
                    <p>SQLite para desenvolvimento, DynamoDB para produção,
                    interface única via Repository Pattern.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">✅</div>
                    <h4>Deploy Automation</h4>
                    <p>Makefile com targets para desenvolvimento,
                    Docker e AWS Lambda deployment.</p>
                </div>
            </div>

            <h4 style="color: var(--primary-blue); margin: 2rem 0 1rem;">Roadmap de Melhorias</h4>

            <div class="timeline">
                <div class="timeline-item">
                    <h5>Streaming Responses</h5>
                    <p>Implementar Server-Sent Events para streaming de respostas LLM.
                    Melhor UX para interações longas com WebSocket support.</p>
                </div>

                <div class="timeline-item">
                    <h5>Authentication & Authorization</h5>
                    <p>Sistema de API keys com rate limiting por usuário.
                    Integração com OAuth2/JWT para autenticação robusta.</p>
                </div>

                <div class="timeline-item">
                    <h5>Advanced Analytics</h5>
                    <p>Dashboard de métricas com usage patterns,
                    cost analysis e performance insights.</p>
                </div>

                <div class="timeline-item">
                    <h5>Multi-Modal Support</h5>
                    <p>Suporte a imagens e arquivos além de texto.
                    Integração com vision models para casos de uso avançados.</p>
                </div>
            </div>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">70%</div>
                    <div class="metric-label">Redução de Código</div>
                </div>
                <div class="metric-card blue">
                    <div class="metric-value">12</div>
                    <div class="metric-label">Diagramas Profissionais</div>
                </div>
                <div class="metric-card green">
                    <div class="metric-value">Modern</div>
                    <div class="metric-label">Python Architecture</div>
                </div>
            </div>
        </section>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p>© 2025 Chat API | Arquitetura Cloud Native</p>
            <p style="margin-top: 1rem; opacity: 0.8;">Documentação técnica do projeto - Python idiomático e padrões modernos</p>
        </div>
    </footer>

    <div class="scroll-to-top" id="scrollTop">↑</div>

    <!-- Fullscreen Modal -->
    <div class="fullscreen-modal" id="fullscreenModal">
        <span class="fullscreen-close" onclick="closeFullscreen()">✕</span>
        <div class="fullscreen-content">
            <img id="fullscreenImage" src="" alt="">
            <div class="fullscreen-caption" id="fullscreenCaption"></div>
        </div>
    </div>

    <script>
        // Smooth scroll for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Active nav link on scroll
        const sections = document.querySelectorAll('.section, .hero');
        const navLinks = document.querySelectorAll('.nav a');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollY >= (sectionTop - 100)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').slice(1) === current) {
                    link.classList.add('active');
                }
            });
        });

        // Scroll to top button
        const scrollTopBtn = document.getElementById('scrollTop');

        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                scrollTopBtn.classList.add('visible');
            } else {
                scrollTopBtn.classList.remove('visible');
            }
        });

        scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Header shadow on scroll
        const header = document.querySelector('.header');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 10) {
                header.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            } else {
                header.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
            }
        });

        // Fullscreen functionality
        function openFullscreen(elementId) {
            const modal = document.getElementById('fullscreenModal');
            const fullscreenImg = document.getElementById('fullscreenImage');
            const fullscreenCap = document.getElementById('fullscreenCaption');

            if (!modal || !fullscreenImg || !fullscreenCap) return;

            try {
                const img = document.getElementById(elementId);
                if (img) {
                    fullscreenImg.src = img.src;
                    fullscreenImg.alt = img.alt;
                    const container = img.closest('.diagram-container');
                    const caption = container ? container.querySelector('.diagram-caption') : null;
                    fullscreenCap.innerHTML = caption ? caption.innerHTML : '';
                }

                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            } catch (error) {
                console.error('Error opening fullscreen:', error);
            }
        }

        function closeFullscreen() {
            const modal = document.getElementById('fullscreenModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // Close fullscreen on modal click
        const fullscreenModal = document.getElementById('fullscreenModal');
        if (fullscreenModal) {
            fullscreenModal.addEventListener('click', (e) => {
                if (e.target === e.currentTarget || e.target.classList.contains('fullscreen-content')) {
                    closeFullscreen();
                }
            });
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeFullscreen();
            }
        });
    </script>
</body>
</html>
