<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="781px" preserveAspectRatio="none" style="width:988px;height:781px;background:#FEFEFE;" version="1.1" viewBox="0 0 988 781" width="988px" zoomAndPan="magnify"><title>Chat API Internal Component Dependencies</title><defs/><g><rect fill="#FEFEFE" height="781" style="stroke:none;stroke-width:1;" width="988" x="0" y="0"/><g class="title" data-source-line="2"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="307.4668" x="333.4866" y="24.9659">Chat API Internal Component Dependencies</text></g><g class="legend" data-source-line="14"><rect fill="none" height="90.2717" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="268.257" x="694.183" y="52.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="79.8557" x="702.823" y="74.0339">Arrow Type</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="61.1798" x="789.9586" y="74.0339">Meaning</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0078" x="702.823" y="93.1018">&#8212;&#8212;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.5417" x="789.9586" y="93.1018">Direct import</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20.6639" x="702.823" y="112.1697">- -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.8414" x="789.9586" y="112.1697">Protocol implementation</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="15.5119" x="702.823" y="131.2376">..&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.0696" x="789.9586" y="131.2376">Type-only import</text><line style="stroke:#000000;stroke-width:1;" x1="699.183" x2="957.44" y1="59.0679" y2="59.0679"/><line style="stroke:#000000;stroke-width:1;" x1="699.183" x2="957.44" y1="78.1358" y2="78.1358"/><line style="stroke:#000000;stroke-width:1;" x1="699.183" x2="957.44" y1="97.2038" y2="97.2038"/><line style="stroke:#000000;stroke-width:1;" x1="699.183" x2="957.44" y1="116.2717" y2="116.2717"/><line style="stroke:#000000;stroke-width:1;" x1="699.183" x2="957.44" y1="135.3396" y2="135.3396"/><line style="stroke:#000000;stroke-width:1;" x1="699.183" x2="699.183" y1="59.0679" y2="135.3396"/><line style="stroke:#000000;stroke-width:1;" x1="786.3186" x2="786.3186" y1="59.0679" y2="135.3396"/><line style="stroke:#000000;stroke-width:1;" x1="957.44" x2="957.44" y1="59.0679" y2="135.3396"/></g><!--cluster Entry Points--><g class="cluster" data-entity="Entry Points" data-source-line="29" data-uid="ent0002" id="cluster_Entry Points"><rect fill="#E0E0E0" height="93.07" rx="5" ry="5" style="stroke:#181818;stroke-width:1;" width="205" x="456.44" y="162.3396"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84.7417" x="516.5692" y="179.3055">Entry Points</text></g><!--cluster API Layer--><g class="cluster" data-entity="API Layer" data-source-line="34" data-uid="ent0005" id="cluster_API Layer"><rect fill="#FFE6E6" height="192.13" rx="5" ry="5" style="stroke:#181818;stroke-width:1;" width="150" x="322.44" y="279.4096"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="66.2898" x="364.2951" y="296.3755">API Layer</text></g><!--cluster Service Layer--><g class="cluster" data-entity="Service Layer" data-source-line="39" data-uid="ent0008" id="cluster_Service Layer"><rect fill="#E6F3FF" height="93.06" rx="5" ry="5" style="stroke:#181818;stroke-width:1;" width="108" x="614.44" y="378.4796"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="92.5537" x="622.1632" y="395.4455">Service Layer</text></g><!--cluster Infrastructure--><g class="cluster" data-entity="Infrastructure" data-source-line="43" data-uid="ent0010" id="cluster_Infrastructure"><rect fill="#F0F0F0" height="280.14" rx="5" ry="5" style="stroke:#181818;stroke-width:1;" width="328" x="34.44" y="495.5396"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100.0856" x="148.3972" y="512.5055">Infrastructure</text></g><!--cluster Providers--><g class="cluster" data-entity="Providers" data-source-line="44" data-uid="ent0011" id="cluster_Providers"><rect fill="#E6FFE6" height="210.14" rx="5" ry="5" style="stroke:#181818;stroke-width:1;" width="134" x="58.44" y="541.5396"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="66.3738" x="92.2531" y="558.5055">Providers</text></g><!--cluster Storage--><g class="cluster" data-entity="Storage" data-source-line="49" data-uid="ent0014" id="cluster_Storage"><rect fill="#FFE6F9" height="93.07" rx="5" ry="5" style="stroke:#181818;stroke-width:1;" width="122" x="216.44" y="541.5396"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="54.3898" x="250.2451" y="558.5055">Storage</text></g><!--cluster Shared--><g class="cluster" data-entity="Shared" data-source-line="54" data-uid="ent0016" id="cluster_Shared"><rect fill="#FFF9E6" height="93.07" rx="5" ry="5" style="stroke:#181818;stroke-width:1;" width="368" x="614.44" y="658.6096"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48.6638" x="774.1081" y="675.5755">Shared</text></g><!--entity __main__.py--><g class="entity" data-entity="__main__.py" data-source-line="30" data-uid="ent0003" id="entity___main__.py"><rect fill="#E0E0E0" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="72.7098" x="573.09" y="200.3396"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="33.2079" x="583.09" y="225.3055">main</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19.5019" x="616.2979" y="225.3055">.py</text></g><!--entity aws.py--><g class="entity" data-entity="aws.py" data-source-line="31" data-uid="ent0004" id="entity_aws.py"><rect fill="#E0E0E0" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="65.0658" x="472.91" y="200.3396"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.0658" x="482.91" y="225.3055">aws.py</text></g><!--entity api.py--><g class="entity" data-entity="api.py" data-source-line="35" data-uid="ent0006" id="entity_api.py"><rect fill="#FFE6E6" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="59.5779" x="396.65" y="317.4096"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5779" x="406.65" y="342.3755">api.py</text></g><!--entity middleware.py--><g class="entity" data-entity="middleware.py" data-source-line="36" data-uid="ent0007" id="entity_middleware.py"><rect fill="#FFE6E6" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="117.4676" x="338.71" y="416.4796"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.4676" x="348.71" y="441.4455">middleware.py</text></g><!--entity chat.py--><g class="entity" data-entity="chat.py" data-source-line="40" data-uid="ent0009" id="entity_chat.py"><rect fill="#E6F3FF" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="67.7818" x="633.55" y="416.4796"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.7818" x="643.55" y="441.4455">chat.py</text></g><!--entity providers.py--><g class="entity" data-entity="providers.py" data-source-line="45" data-uid="ent0012" id="entity_providers.py"><rect fill="#E6FFE6" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="102.0817" x="74.4" y="579.5396"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.0817" x="84.4" y="604.5055">providers.py</text></g><!--entity retry.py--><g class="entity" data-entity="retry.py" data-source-line="46" data-uid="ent0013" id="entity_retry.py"><rect fill="#E6FFE6" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="71.1558" x="96.86" y="696.6096"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.1558" x="106.86" y="721.5755">retry.py</text></g><!--entity storage.py--><g class="entity" data-entity="storage.py" data-source-line="50" data-uid="ent0015" id="entity_storage.py"><rect fill="#FFE6F9" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="89.8737" x="232.5" y="579.5396"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.8737" x="242.5" y="604.5055">storage.py</text></g><!--entity config.py--><g class="entity" data-entity="config.py" data-source-line="55" data-uid="ent0017" id="entity_config.py"><rect fill="#FFF9E6" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="80.3818" x="886.25" y="696.6096"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.3818" x="896.25" y="721.5755">config.py</text></g><!--entity exceptions.py--><g class="entity" data-entity="exceptions.py" data-source-line="56" data-uid="ent0018" id="entity_exceptions.py"><rect fill="#FFF9E6" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="110.5237" x="630.18" y="696.6096"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.5237" x="640.18" y="721.5755">exceptions.py</text></g><!--entity types.py--><g class="entity" data-entity="types.py" data-source-line="57" data-uid="ent0019" id="entity_types.py"><rect fill="#FFF9E6" height="39.0679" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="74.9078" x="775.99" y="696.6096"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.9078" x="785.99" y="721.5755">types.py</text></g><g class="entity" data-entity="GMN40" data-source-line="91" data-uid="ent0041" id="entity_GMN40"><path d="M378.93,572.5196 L378.93,625.6376 A5,5 0 0 0 383.93,630.6376 L626.9542,630.6376 A5,5 0 0 0 631.9542,625.6376 L631.9542,577.5196 L621.9542,567.5196 L383.93,567.5196 A5,5 0 0 0 378.93,572.5196" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M621.9542,567.5196 L621.9542,575.0196 A2.5,2.5 0 0 0 624.4542,577.5196 L631.9542,577.5196 L621.9542,567.5196" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.5911" x="384.93" y="586.4166">Dependency Injection:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.0242" x="384.93" y="604.1226">ChatService receives implementations</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.9071" x="384.93" y="621.8286">of protocols at runtime</text></g><g class="entity" data-entity="GMN43" data-source-line="97" data-uid="ent0044" id="entity_GMN43"><path d="M257.07,202.1696 L257.07,237.5816 A5,5 0 0 0 262.07,242.5816 L413.23,242.5816 L417.23,316.9796 L421.23,242.5816 L432.8141,242.5816 A5,5 0 0 0 437.8141,237.5816 L437.8141,207.1696 L427.8141,197.1696 L262.07,197.1696 A5,5 0 0 0 257.07,202.1696" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M427.8141,197.1696 L427.8141,204.6696 A2.5,2.5 0 0 0 430.3141,207.1696 L437.8141,207.1696 L427.8141,197.1696" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.2801" x="263.07" y="216.0666">Entry point for FastAPI</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.7441" x="263.07" y="233.7726">Wires up all dependencies</text></g><!--link __main__.py to api.py--><g class="link" data-entity-1="__main__.py" data-entity-2="api.py" data-source-line="61" data-uid="lnk20" id="link___main__.py_api.py"><path d="M612.33,239.8896 C612.33,270.0496 612.33,323.6796 612.33,323.6796 C612.33,323.6796 515.39,323.6796 462.72,323.6796" fill="none" id="__main__.py-to-api.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="456.72,323.6796,465.72,327.6796,461.72,323.6796,465.72,319.6796,456.72,323.6796" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.283" x="552.42" y="319.5766">app</text></g><!--link __main__.py to config.py--><g class="link" data-entity-1="__main__.py" data-entity-2="config.py" data-source-line="62" data-uid="lnk21" id="link___main__.py_config.py"><path d="M646.06,219.6796 C732.08,219.6796 939.84,219.6796 939.84,219.6796 C939.84,219.6796 939.84,598.0396 939.84,690.3796" fill="none" id="__main__.py-to-config.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="939.84,696.3796,943.84,687.3796,939.84,691.3796,935.84,687.3796,939.84,696.3796" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.5551" x="890.84" y="307.0366">settings</text></g><!--link aws.py to api.py--><g class="link" data-entity-1="aws.py" data-entity-2="api.py" data-source-line="63" data-uid="lnk22" id="link_aws.py_api.py"><path d="M472.47,219.6796 C459.22,219.6796 447.02,219.6796 447.02,219.6796 C447.02,219.6796 447.02,277.5896 447.02,311.0496" fill="none" id="aws.py-to-api.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="447.02,317.0496,451.02,308.0496,447.02,312.0496,443.02,308.0496,447.02,317.0496" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.283" x="423.02" y="270.5366">app</text></g><!--link api.py to chat.py--><g class="link" data-entity-1="api.py" data-entity-2="chat.py" data-source-line="66" data-uid="lnk23" id="link_api.py_chat.py"><path d="M456.54,349.6796 C515.32,349.6796 639.67,349.6796 639.67,349.6796 C639.67,349.6796 639.67,384.4796 639.67,409.9896" fill="none" id="api.py-to-chat.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="639.67,415.9896,643.67,406.9896,639.67,410.9896,635.67,406.9896,639.67,415.9896" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71.604" x="509.26" y="345.5766">ChatService</text></g><!--link api.py to config.py--><g class="link" data-entity-1="api.py" data-entity-2="config.py" data-source-line="67" data-uid="lnk24" id="link_api.py_config.py"><path d="M456.51,330.6796 C562.6,330.6796 913.04,330.6796 913.04,330.6796 C913.04,330.6796 913.04,611.2996 913.04,690.2296" fill="none" id="api.py-to-config.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="913.04,696.2296,917.04,687.2296,913.04,691.2296,909.04,687.2296,913.04,696.2296" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.5551" x="818.55" y="326.5766">settings</text></g><!--link api.py to exceptions.py--><g class="link" data-entity-1="api.py" data-entity-2="exceptions.py" data-source-line="68" data-uid="lnk25" id="link_api.py_exceptions.py"><path d="M456.58,343.6796 C531.66,343.6796 721.02,343.6796 721.02,343.6796 C721.02,343.6796 721.02,612.7596 721.02,690.1196" fill="none" id="api.py-to-exceptions.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="721.02,696.1196,725.02,687.1196,721.02,691.1196,717.02,687.1196,721.02,696.1196" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37.531" x="722.02" y="383.5766">errors</text></g><!--link api.py to middleware.py--><g class="link" data-entity-1="api.py" data-entity-2="middleware.py" data-source-line="69" data-uid="lnk26" id="link_api.py_middleware.py"><path d="M426.41,356.5096 C426.41,373.7696 426.41,392.7996 426.41,410.1396" fill="none" id="api.py-to-middleware.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="426.41,416.1396,430.41,407.1396,426.41,411.1396,422.41,407.1396,426.41,416.1396" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.1581" x="332.41" y="382.2266">add_request_id</text></g><!--link api.py to providers.py--><g class="link" data-entity-1="api.py" data-entity-2="providers.py" data-source-line="70" data-uid="lnk27" id="link_api.py_providers.py"><path d="M396.24,330.6796 C316.85,330.6796 108.43,330.6796 108.43,330.6796 C108.43,330.6796 108.43,511.3596 108.43,573.3396" fill="none" id="api.py-to-providers.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="108.43,579.3396,112.43,570.3396,108.43,574.3396,104.43,570.3396,108.43,579.3396" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.5491" x="7" y="326.5766">create_llm_provider</text></g><!--link api.py to storage.py--><g class="link" data-entity-1="api.py" data-entity-2="storage.py" data-source-line="71" data-uid="lnk28" id="link_api.py_storage.py"><path d="M396.21,343.6796 C353.03,343.6796 278.84,343.6796 278.84,343.6796 C278.84,343.6796 278.84,513.6596 278.84,573.4596" fill="none" id="api.py-to-storage.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="278.84,579.4596,282.84,570.4596,278.84,574.4596,274.84,570.4596,278.84,579.4596" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.2141" x="167.84" y="380.7766">create_repository,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.17" x="183.362" y="398.4826">create_cache</text></g><!--link api.py to types.py--><g class="link" data-entity-1="api.py" data-entity-2="types.py" data-source-line="72" data-uid="lnk29" id="link_api.py_types.py"><path d="M456.55,336.6796 C551.11,336.6796 835.91,336.6796 835.91,336.6796 C835.91,336.6796 835.91,612.1996 835.91,690.2796" fill="none" id="api.py-to-types.py" style="stroke:#4A90E2;stroke-width:1.5;stroke-dasharray:7,7;"/><polygon fill="#4A90E2" points="835.91,696.2796,839.91,687.2796,835.91,691.2796,831.91,687.2796,835.91,696.2796" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.0841" x="728.03" y="351.5766">MessageRecord</text></g><!--link chat.py to exceptions.py--><g class="link" data-entity-1="chat.py" data-entity-2="exceptions.py" data-source-line="75" data-uid="lnk30" id="link_chat.py_exceptions.py"><path d="M684.39,455.7096 C684.39,507.1396 684.39,639.0596 684.39,690.4696" fill="none" id="chat.py-to-exceptions.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="684.39,696.4696,688.39,687.4696,684.39,691.4696,680.39,687.4696,684.39,696.4696" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37.531" x="646.39" y="571.9866">errors</text></g><!--link chat.py to providers.py--><g class="link" data-entity-1="chat.py" data-entity-2="providers.py" data-source-line="76" data-uid="lnk31" id="link_chat.py_providers.py"><path d="M650.49,455.8296 C650.49,472.1696 650.49,492.6796 650.49,492.6796 C650.49,492.6796 142.45,492.6796 142.45,492.6796 C142.45,492.6796 142.45,542.2396 142.45,573.0696" fill="none" id="chat.py-to-providers.py" style="stroke:#4A90E2;stroke-width:1.5;stroke-dasharray:7,7;"/><polygon fill="#4A90E2" points="142.45,579.0696,146.45,570.0696,142.45,574.0696,138.45,570.0696,142.45,579.0696" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.1681" x="293.71" y="488.5766">LLMProvider</text></g><!--link chat.py to storage.py--><g class="link" data-entity-1="chat.py" data-entity-2="storage.py" data-source-line="77" data-uid="lnk32" id="link_chat.py_storage.py"><path d="M667.44,455.6296 C667.44,483.3596 667.44,530.6796 667.44,530.6796 C667.44,530.6796 300.61,530.6796 300.61,530.6796 C300.61,530.6796 300.61,553.0896 300.61,573.2896" fill="none" id="chat.py-to-storage.py" style="stroke:#4A90E2;stroke-width:1.5;stroke-dasharray:7,7;"/><polygon fill="#4A90E2" points="300.61,579.2896,304.61,570.2896,300.61,574.2896,296.61,570.2896,300.61,579.2896" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.9001" x="428.24" y="508.5766">Repository,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37.115" x="444.1325" y="526.2826">Cache</text></g><!--link chat.py to types.py--><g class="link" data-entity-1="chat.py" data-entity-2="types.py" data-source-line="78" data-uid="lnk33" id="link_chat.py_types.py"><path d="M701.5,435.6796 C746.72,435.6796 820.93,435.6796 820.93,435.6796 C820.93,435.6796 820.93,626.5796 820.93,690.4196" fill="none" id="chat.py-to-types.py" style="stroke:#4A90E2;stroke-width:1.5;stroke-dasharray:7,7;"/><polygon fill="#4A90E2" points="820.93,696.4196,824.93,687.4196,820.93,691.4196,816.93,687.4196,820.93,696.4196" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.877" x="787.93" y="502.2366">types</text></g><!--link providers.py to exceptions.py--><g class="link" data-entity-1="providers.py" data-entity-2="exceptions.py" data-source-line="81" data-uid="lnk34" id="link_providers.py_exceptions.py"><path d="M170.84,618.8596 C170.84,652.1296 170.84,715.6796 170.84,715.6796 C170.84,715.6796 490.82,715.6796 623.88,715.6796" fill="none" id="providers.py-to-exceptions.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="629.88,715.6796,620.88,711.6796,624.88,715.6796,620.88,719.6796,629.88,715.6796" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.7781" x="235.95" y="711.5766">ConfigurationError</text></g><!--link providers.py to retry.py--><g class="link" data-entity-1="providers.py" data-entity-2="retry.py" data-source-line="82" data-uid="lnk35" id="link_providers.py_retry.py"><path d="M132.44,618.9396 C132.44,640.4596 132.44,668.6196 132.44,690.1896" fill="none" id="providers.py-to-retry.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="132.44,696.1896,136.44,687.1896,132.44,691.1896,128.44,687.1896,132.44,696.1896" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.0991" x="45.44" y="653.4566">with_llm_retry</text></g><!--link providers.py to types.py--><g class="link" data-entity-1="providers.py" data-entity-2="types.py" data-source-line="83" data-uid="lnk36" id="link_providers.py_types.py"><path d="M173.66,618.9396 C173.66,641.3396 173.66,674.6796 173.66,674.6796 C173.66,674.6796 790.97,674.6796 790.97,674.6796 C790.97,674.6796 790.97,679.6996 790.97,690.3796" fill="none" id="providers.py-to-types.py" style="stroke:#4A90E2;stroke-width:1.5;stroke-dasharray:7,7;"/><polygon fill="#4A90E2" points="790.97,696.3796,794.97,687.3796,790.97,691.3796,786.97,687.3796,790.97,696.3796" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.7511" x="389.3" y="670.5766">TokenUsage</text></g><!--link retry.py to exceptions.py--><g class="link" data-entity-1="retry.py" data-entity-2="exceptions.py" data-source-line="84" data-uid="lnk37" id="link_retry.py_exceptions.py"><path d="M168.3,725.6796 C262.36,725.6796 510.71,725.6796 623.86,725.6796" fill="none" id="retry.py-to-exceptions.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="629.86,725.6796,620.86,721.6796,624.86,725.6796,620.86,729.6796,629.86,725.6796" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.3681" x="290.08" y="740.5766">LLMProviderError</text></g><!--link storage.py to exceptions.py--><g class="link" data-entity-1="storage.py" data-entity-2="exceptions.py" data-source-line="87" data-uid="lnk38" id="link_storage.py_exceptions.py"><path d="M262.46,619.0696 C262.46,650.1796 262.46,706.6796 262.46,706.6796 C262.46,706.6796 508.85,706.6796 623.71,706.6796" fill="none" id="storage.py-to-exceptions.py" style="stroke:#4A90E2;stroke-width:1.5;"/><polygon fill="#4A90E2" points="629.71,706.6796,620.71,702.6796,624.71,706.6796,620.71,710.6796,629.71,706.6796" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.8841" x="403.28" y="702.5766">StorageError</text></g><!--link storage.py to types.py--><g class="link" data-entity-1="storage.py" data-entity-2="types.py" data-source-line="88" data-uid="lnk39" id="link_storage.py_types.py"><path d="M292.42,619.0396 C292.42,634.2796 292.42,652.6796 292.42,652.6796 C292.42,652.6796 805.95,652.6796 805.95,652.6796 C805.95,652.6796 805.95,671.7796 805.95,690.4096" fill="none" id="storage.py-to-types.py" style="stroke:#4A90E2;stroke-width:1.5;stroke-dasharray:7,7;"/><polygon fill="#4A90E2" points="805.95,696.4096,809.95,687.4096,805.95,691.4096,801.95,687.4096,805.95,696.4096" style="stroke:#4A90E2;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.0841" x="456.23" y="648.5766">MessageRecord</text></g><!--link chat.py to GMN40--><g class="link" data-entity-1="chat.py" data-entity-2="GMN40" data-source-line="91" data-uid="lnk42" id="link_chat.py_GMN40"><path d="M633.14,435.6796 C613.49,435.6796 592.71,435.6796 592.71,435.6796 C592.71,435.6796 592.71,519.6296 592.71,567.1896" fill="none" id="chat.py-GMN40" style="stroke:#4A90E2;stroke-width:1.5;stroke-dasharray:7,7;"/></g><!--SRC=[XLRRRjD047ttLmpbWHTQfGMA6WcaaDeGgQLH4cu2P2ts95bgxvhTTKD4A_4HV25VmkpwqhKReAxITERCcUlEsd2J8OpNpC1eEe69CAW4os0iyq8A50PEiK2HeaWuwY3GbrmKJB4S2fPSiXNEpPO852Q6YLM67Y1fAFuE-K8SAoLBaOvb9XNSZqBxU8YHKdApMFFaKg3MS7ZmfA-iBH-FJWRXaQTqj8bK0XKS3Zo5NhDKRhXOmP9bsWydumBDja2Gognb43o0CrnHya7c_e2H1IY-MflW-bdb71OMJl-T8nEMyZguXjy_Vz7lSxY6Kswp1aw5KCRfzc7VAgPA6fd8pAeopAb8p70f7EJWm28iyRuKsVRMcaAe0d6HiQqi3V4jA2WZuOKqHkQmuMODEHCbzR2GcbjMYYkub-AIieFtqujv7BvUp3x0aq5NQlj_r1VEmzdRoJWaS4yndLsydPo6CtXwnsHnCHkz37SeNercuIarWxY2UdnWBnH6RM4gkJ1w3-w70_l0Zm3evsCSvuoBE3uejfyRNQLX6zqHtdYKDXEg3ohYYwBmE3nk-5Z1AwjAN0bpdb9XDqnXH-Sppb5TyGHRrl0uUXH53Mj2nwSEniaxfXEnL4mRLIQcL6WZ6jYdjcrXD15NF4MbA_QeZTbvA1fjwoQgetTgXLJ3EweRzzbrCpTIqPUwCD69xqHNkjiYH2SrJwSKQofKwWYYazlA9b8i-QgnjPfAZjyJBEmKwhiwUzQwuXixsjL457OY8FMtJtSSzkaajGqT0YkANG0lhY5eD8PE0p4ruxE3X29e1wZdlm5Mp4tNXsv_rYFI1_t5lO_fbMW8IAj5zL6zAQLOqpHM-Ar4RMAUzj3TWHb2ef0PZBCiZnjLpyBlVejNw9Q8LDk7dqGjIrYozjAqwyhhv91MeTP4D4DQlcvLTGvFhw9j4VzTYHRclFMJEpixdxP9TQ7Th6P-EkCgZoxUJyHzjmaqvBtOks7iJc3i-bygjzv3cyrEkzi3F7Ght3NA2VlmEr4kv2MADxRYWKUpEnglK5KijZjLXNgv-NNRpLNRrJdv-FzDX906uKjrNyabr0sWbT2-QcpfHUGhtPpaRaXoxtZPrmZaLwXxDwSc674LzRsgWLveL2aCpz7Ucs1zrfxjBKxGQdx9p5ytItgLY6XRqm8WpJkwlZMK1R0iwzQdfVm3]--></g></svg>
